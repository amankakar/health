{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from \"react\";\nimport ReceptionsitFactory from \"../build/contracts/ReceptionsitFactory.json\";\nimport Receptionist from \"../build/contracts/Receptionsit.json\";\nimport { Form, Button, Input, Message, Card } from \"semantic-ui-react\";\nimport { Link } from \"../routes\";\nimport web3 from \"../ethereum/web3\";\nimport truffleContract from \"truffle-contract\";\nimport Layout from \"../components/Layout\";\nimport instanceFactoryFile from \"../ethereum/receptionFactory\";\n\nvar index =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(index, _Component);\n\n  function index() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, index);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(index)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      web3: null,\n      accounts: null,\n      hospitalName: \"\",\n      receptionistName: \"\",\n      instanceFactory1: \"\",\n      receptionistInstance: \"\",\n      recetionistAddress: \"\",\n      instanceFactory: \"\",\n      receptionist: \"\",\n      receptionList: []\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var _this$state, web3, instanceFactory1, instanceFactory, accounts, rec;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _this$state = _this.state, web3 = _this$state.web3, instanceFactory1 = _this$state.instanceFactory1, instanceFactory = _this$state.instanceFactory;\n                _context.next = 4;\n                return web3.eth.getAccounts();\n\n              case 4:\n                accounts = _context.sent;\n                console.log(web3, accounts, instanceFactory1, instanceFactory);\n                _context.next = 8;\n                return instanceFactory.createReceptionist(_this.state.hospitalName, _this.state.receptionistName, {\n                  from: accounts[0]\n                });\n\n              case 8:\n                rec = _context.sent;\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onHospitalHandle\", function (event) {\n      _this.setState({\n        hospitalName: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onReceptionistHandle\", function (event) {\n      _this.setState({\n        receptionistName: event.target.value\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(index, [{\n    key: \"renderHospitals\",\n    value: function renderHospitals() {\n      console.log(\"BRFORE:\", this.props.receptionist);\n      var items = this.props.receptionist.map(function (element, index) {\n        var address = element[3];\n        return {\n          header: \"Hospital Name:  \" + element[0],\n          description: \"Admin Name:  \" + element[1],\n          meta: \"Account of Admin:  \" + element[2],\n          extra: React.createElement(Link, {\n            route: \"hospital/\".concat(address)\n          }, React.createElement(\"a\", {\n            color: \"blue\"\n          }, \"Visit Hospital\")),\n          fluid: true\n        };\n      });\n      console.log(\"Lenght\", this.props.receptionist);\n      return React.createElement(Card.Group, {\n        items: items,\n        style: {\n          color: \"black\",\n          marginTop: 10,\n          borderRadius: 4,\n          margin: 10,\n          fontFamily: \"Times New Roman, Times, serif\",\n          fontSize: 20\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Layout, null, React.createElement(\"div\", null, React.createElement(Link, {\n        route: \"hospital/register\"\n      }, React.createElement(\"a\", null, React.createElement(Button, {\n        floated: \"right\",\n        primary: true,\n        content: \"Register New Admin/Receptionist\",\n        icon: \"add circle\",\n        labelPosition: \"left\"\n      }))), React.createElement(\"div\", {\n        style: {\n          marginLeft: 300\n        }\n      }, React.createElement(\"h2\", null, \"List Of All Registered Hospitals\")), \" \"), React.createElement(\"hr\", null), React.createElement(\"div\", null, this.renderHospitals(), \";\"), React.createElement(Link, {\n        route: \"/patient/\"\n      }, React.createElement(\"a\", null, \"this is link to patient/index.js page\")), React.createElement(Link, {\n        route: \"/doctor\"\n      }, React.createElement(\"a\", null, \"Doctor Page Link\")));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var accounts, Contract, instanceFactory, receptionCount, receptionist;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                //const web3 = await getWeb3();\n                console.log(\"web3\", web3.version);\n                _context2.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context2.sent;\n                //this.setState({ web3, accounts });\n                Contract = truffleContract(ReceptionsitFactory);\n                Contract.setProvider(web3.currentProvider);\n                _context2.next = 8;\n                return Contract.deployed();\n\n              case 8:\n                instanceFactory = _context2.sent;\n                console.log(\"Address:\", instanceFactory);\n                _context2.next = 12;\n                return instanceFactory.getReceptionList.call();\n\n              case 12:\n                receptionCount = _context2.sent;\n                console.log(\"List of :\", receptionCount);\n                _context2.next = 16;\n                return _Promise.all(Array(_parseInt(receptionCount)).fill().map(function (element, index) {\n                  return instanceFactory.receptionSummary.call(index);\n                }));\n\n              case 16:\n                receptionist = _context2.sent;\n                console.log(\"Receptionist Array\", receptionist[0]);\n                return _context2.abrupt(\"return\", {\n                  receptionist: receptionist\n                });\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getInitialProps() {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return index;\n}(Component);\n\nexport default index;","map":null,"metadata":{},"sourceType":"module"}